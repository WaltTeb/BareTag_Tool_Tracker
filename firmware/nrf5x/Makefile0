PROJECT_NAME = $(shell basename "$(realpath ./)")

APPLICATION_SRCS = $(notdir $(wildcard ./*.c))
APPLICATION_SRCS += softdevice_handler.c
APPLICATION_SRCS += app_util_platform.c
APPLICATION_SRCS += nrf_drv_common.c
APPLICATION_SRCS += nrf_delay.c
APPLICATION_SRCS += app_error.c
APPLICATION_SRCS += app_error_weak.c
APPLICATION_SRCS += nrf_drv_clock.c
APPLICATION_SRCS += app_timer.c

USE_NRF52 := $(filter nrf52,$(MAKECMDGOALS))

SDK_VERSION = 11

SHELL := /bin/bash

# BOARD_SIMPLE is the default board with no external crystal to maximize compatibility
# BOARD_E104BT5032A is for E104-BT5032A board https://www.aliexpress.com/item/4000538644215.html
# BOARD_ALIEXPRESS is for this "AliExpress beacon" https://www.aliexpress.com/item/32826502025.html
# ADV_KEYS_FILE the advertisment keys file, generated by macless haystack
# BOARD_ALIEXPRESS_NO_XTAL is for AliExpress beacons without an XTAL

ADV_KEYS_FILE ?=
BOARD ?= BOARD_SIMPLE

ADV_KEY_BASE64 ?=
NEW_ADV_KEY_HEX := $(if $(ADV_KEY_BASE64),$(shell base64 -d <<< $(ADV_KEY_BASE64) | xxd -p),)

# Compile for nrf52 by default, use "NRF_MODEL=nrf51 make" to compile for nrf51 platform
ifeq ($(NRF_MODEL), nrf51)
SOFTDEVICE_MODEL = s130
else
SOFTDEVICE_MODEL = s132
NRF_MODEL = nrf52
endif

# Include the NRF base Makefile but only once to avoid duplicates
ifndef NRF5X_BASE_MAKEFILE_INCLUDED
NRF5X_BASE_MAKEFILE_INCLUDED = 1
include $(NRF_BASE_PATH)/make/Makefile
endif

# Custom commands (if needed, you can override them here, but make sure to avoid duplicates)

LIBRARY_PATHS += .
#SOURCE_PATHS += .

# If you need specific custom logic, you can add more custom targets or variables here.

